<html>
        <head>
                <link rel="stylesheet" type="text/css" href="/sample.css">
                <script type="text/javascript" src="/jquery-1.12.2.min.js"></script>
                 <script type="text/javascript">
                         var user = undefined;
                         var message = undefined;
                         var ignored = {gid:"g1",
                                 uid:"u0",
                                 pid:3,
                                 previous:2,
                                 scramble:"ijklmop"};
                         LOCAL
                        (function activity() {
                                $.getJSON('/game/' + local.gid)
                                .done(function(data) {
                                     html = '<ul>';
                                     for (i = 0; i < data.users.length; i++) {
                                        html += '<li>';
                                        html += 'User "' + data.users[i].name + '" ';
                                        html += 'Puzzle "' + data.users[i].puzzle + '"';
                                        html += '</li>';
                                     }
                                     html += '</ul>';
                                     html += 'Time = ' + data.timer;
                                     document.getElementById('activity').innerHTML = "<p>" + html + "</p>";
                                     setTimeout(activity, 1000);
                                        })
                                .fail(function() {
                                     document.getElementById('activity').innerHTML = "<p>Error</p>";
                                        })
                                .always(function() {
                                        }) ;
                                })();


                        // reload puzzle state
                        (function puzzle() {
                                $.getJSON('/game/' + local.gid + '/puzzle/' + local.pid)
                                .done(function(data) {
                                     document.getElementById('scramble').innerHTML = data.scramble;
                                     if (data.message) {
                                        document.getElementById('puzzle.state').innerHTML = data.message;
                                     }
                        if (!data.solved) {
                                document.getElementById("submission").style.visibility = "visible";
                        } else {
                                document.getElementById("submission").style.visibility = "hidden";
                        }

                                     setTimeout(puzzle, 1000);
                                        })
                                .fail(function() {
                                     document.getElementById('scramble').innerHTML = "<font color=red>Error Loading Puzzle</font>";
                                        })
                                .always(function() {
                                        }) ;
                                })();

                </script>

        </head>
        <body>
                <h1>
                Puzzle <script type="text/javascript">
                        document.write(local.pid)
        if (local.state) {
                document.write('(' + local.state + ')')
        }
                </script>
                <div id='puzzle.state'></div>
                </h1>
                <script type="text/javascript">
if (message !== undefined) {
        document.write('<p><font color="red"><i>' + message + '</i></font></p>');
}
</script>
                <!-- activity -->
                <div class="activity" id="activity"
                        style="border:1px solid black;">
                        Loading...
                </div>

                <!-- previous puzzle -->
                <div style="float:left" id="prev_puzzle">
                <script type="text/javascript">
                    document.write('<form action="/game/' + local.gid + '/user/' + local.uid + '" method="post">');
                </script>
                <input type="hidden" name="puzzle" value="prev">
                <input type="submit" value="Previous Puzzle">
                </form>
                </div>

                <script type="text/javascript">
                        if (local.previous != null) {
                                document.getElementById("prev_puzzle").style.visibility = "visible";
                        } else {
                                document.getElementById("prev_puzzle").style.visibility = "hidden";
                        }
                </script>

                <!-- scramble -->
                <div class="puzzle" style="float:center">
                        <div class="scramble">
                                <p><b>Scramble = &quot;
                                        <div id="scramble">
                                                ...
                                        </div>
                        &quot;
                </b></p>
                </div>

                <!-- guess -->
                <div class="wrapper" id="submission">
                <script type="text/javascript">
                document.write('<form action="/game/' + local.gid + '/puzzle/' + local.pid + '" method="post">');
                </script>
                        <input type="text" name="l1" maxlength=1 size=1>
                        <input type="text" name="l2" maxlength=1 size=1>
                        <input type="text" name="l3" maxlength=1 size=1>
                        <input type="text" name="l4" maxlength=1 size=1>
                        <input type="text" name="l5" maxlength=1 size=1>
                        <input type="text" name="l6" maxlength=1 size=1>
                        <input type="text" name="l7" maxlength=1 size=1>
                        <script type="text/javascript">
                        document.write('<input type="hidden" name="uid" value="' + local.uid + '">');
                </script>
                        <br>
                        <input type="submit" value="Submit Guess">
                </form>
                </div>
        </div>

                <!-- next puzzle -->
                <div style="float:right" id="next_puzzle">
                <script type="text/javascript">
                    document.write('<form action="/game/' + local.gid + '/user/' + local.uid + '" method="post">');
                </script>
                <input type="hidden" name="puzzle" value="next">
                <input type="submit" value="Next Puzzle">
                </form>
                </div>

                <script type="text/javascript">
                        if (local.next) {
                                document.getElementById("next_puzzle").style.visibility = "visible";
                        } else {
                                document.getElementById("next_puzzle").style.visibility = "hidden";
                        }
                </script>

        </body>
</html>
